<div class="container">
    <app-h3
        [title]="!loggedin || user == undefined ? l10n.locale.views.home.titleGuest : ln(l10n.locale.views.home.titleUser, [user.name])"
        [busy]="loading"></app-h3>
    <p>{{loggedin && user !== undefined ? l10n.locale.views.home.descriptionUser :
        l10n.locale.views.home.descriptionGuest}} <span class="d-lg-none"
            *ngIf="loggedin">{{l10n.locale.views.home.descriptionMobile}}</span></p>
</div>

<div class="container">
    <div class="row">
        <div class="col col-12">
            <!-- <div class="col col-12 col-xl-8 mt-3 mt-lg-5"> -->
            <h4 class="mb-3">
                <app-icon [icon]="recentIcon" [marginEnd]="2"></app-icon>
                <span>{{l10n.locale.views.home.recipes.recentTitle}}</span>
            </h4>
        </div>
    </div>
    <ng-container *ngTemplateOutlet="recentRecipes1Col; context: { recipes: recipes.list }"></ng-container>
    <ng-container *ngTemplateOutlet="recentRecipes2Col; context: { recipes: recipes.list }"></ng-container>
    <ng-container *ngTemplateOutlet="recentRecipes3Col; context: { recipes: recipes.list }"></ng-container>
    <!-- <div class="col col-12 col-xl-4 mt-3 mt-lg-5">
            <h4 class="mb-3">
                <app-icon [icon]="bestIcon" [marginEnd]="2"></app-icon>
                <span>{{l10n.locale.views.home.recipes.bestTitle}}</span>
            </h4>
            <div class="row p-0">
                <div class="col col-12 p-0">
                    <ng-container
                        *ngTemplateOutlet="mostViewedRecipe; context: { recipe: recipes.mostViews }"></ng-container>
                    <ng-container
                        *ngTemplateOutlet="topVotedRecipes; context: { recipes: recipes.topVoted }"></ng-container>
                </div>
            </div>
        </div> -->
</div>

<ng-template #recentRecipes3Col let-recipes="recipes">
    <div class="row d-none d-xxl-flex p-0">
        <div class="col col-4 p-0">
            <ng-container *ngFor="let recipeitem of recipes; let i = index">
                <ng-container *ngIf="i % 3 === 0">
                    <app-recipe-v-card [recipe]="recipeitem"></app-recipe-v-card>
                </ng-container>
            </ng-container>
        </div>
        <div class="col col-4 p-0">
            <ng-container *ngFor="let recipeitem of recipes; let i = index">
                <ng-container *ngIf="i % 3 === 1">
                    <app-recipe-v-card [recipe]="recipeitem"></app-recipe-v-card>
                </ng-container>
            </ng-container>
        </div>
        <div class="col col-4 p-0">
            <ng-container *ngFor="let recipeitem of recipes; let i = index">
                <ng-container *ngIf="i % 3 === 2">
                    <app-recipe-v-card [recipe]="recipeitem"></app-recipe-v-card>
                </ng-container>
            </ng-container>
        </div>
    </div>
</ng-template>

<ng-template #recentRecipes2Col let-recipes="recipes">
    <div class="row d-none d-lg-flex d-xxl-none p-0">
        <div class="col col-6 p-0">
            <ng-container *ngFor="let recipeitem of recipes; let i = index">
                <ng-container *ngIf="i % 2 === 0">
                    <app-recipe-v-card [recipe]="recipeitem"></app-recipe-v-card>
                </ng-container>
            </ng-container>
        </div>
        <div class="col col-6 p-0">
            <ng-container *ngFor="let recipeitem of recipes; let i = index">
                <ng-container *ngIf="i % 2 === 1">
                    <app-recipe-v-card [recipe]="recipeitem"></app-recipe-v-card>
                </ng-container>
            </ng-container>
        </div>
    </div>
</ng-template>

<ng-template #recentRecipes1Col let-recipes="recipes">
    <div class="row p-0 d-lg-none">
        <div class="col col-12 p-0">
            <app-recipe-v-card *ngFor="let recipeitem of recipes; let i = index"
                [recipe]="recipeitem"></app-recipe-v-card>
        </div>
    </div>
</ng-template>

<ng-template #mostViewedRecipe let-recipe="recipe">
    <ng-container *ngIf="recipe != undefined">
        <app-recipe-h-card [recipe]="recipe"
            [subtitle]="l10n.locale.views.home.recipes.mostViewsSubtitle"></app-recipe-h-card>
    </ng-container>
</ng-template>

<ng-template #topVotedRecipes let-recipes="recipes">
    <ng-container *ngIf="recipes != null">
        <ng-container *ngFor="let recipeitem of recipes; let i = index">
            <app-recipe-h-card [recipe]="recipeitem"
                [subtitle]="l10n.locale.views.home.recipes.topVotedSubtitle"></app-recipe-h-card>
        </ng-container>
    </ng-container>
</ng-template>